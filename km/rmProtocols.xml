<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<?xml-stylesheet type="text/xsl" href="IrpProtocols2html.xsl"?>
<!--
This is a patch file for IrpProtocols.xml included in IrpTransmogrifier.  When displayed, its version number
is appended to that of the main file, with '+' as separator.
-->
<!--
Addendum to Additional notes on usage in RMIR:

There is now an additional element in the rm namespace.  Logically its description should follow after
rm:assignment.  It is

rm:translator:  Like rm:assignment, this may occur multiple times with a single attribute "target" whose
allowed values are the same as those allowed for the "target" attribute of rm:assignment, though not
necessarily a value used in an rm:assignment element.  This is used when a protocol parameter evaluates to
a choice index, to allow RMIR to display the choice name rather than the numerical choice index.  The content
of the element has the form <parameter name> = <choice list>, where the choice list is a list of choice names
separated by vertical bars.  As an example, the NEC1-f16 protocol includes an executor with protocol name
NEC1-Yamaha that includes the element
    <rm:translator target="Y">YStyle=NEC|Y1|Y2|Y3</rm:translator>
where Y is assigned a value by the definitionSpec of the executor descriptor.

Setting a protocol parameter to -1, either in the definitionSpec of an executor descriptor or with an
rm:assignment, suppresses the display of that parameter in RMIR.  The NEC1-Yamaha case uses this to prevent
the values of E and X being displayed.  The distinction between assignments in a definitionSpec and those
in an rm:assignment lies in their scope.  Those made in an rm:assignment have no effect within the executor
descriptor.  They only affect parameter values displayed in the Learned Signals tab of RMIR.  Assignments made
in a definitionSpec also apply within the executor descriptor and so are available to a qualifier in an
infoSpec and to the parameterSpec, as well as to the parameter values displayed in RMIR.  In the NEC1-Yamaha
example used above, the definitionSpec makes assignments to X, Y and E.  E is used only in the calculation
of X, so after X is calculated it can be set to -1 to suppress its display.  X is used in the qualifier but is
to be suppressed in display, so it is set to -1 in an rm:assignment.  Y is used in the the parameterSpec and
is displayed through an rm:translator as a choice name.
 
The value -1 can also be used to rename a parameter for display by adding two rm:assignments in which the first
is an assignment to the new name of that parameter of its value by its old name, the second is an assignment
to the old name of -1.  The NEC1-f16 protocol has an example of this as well, where E is renamed as OBC2.

The executor that is used for the decode shown in the Learned Signals tab of RMIR is selected as follows.
The uei-executor parameters of type XML are are considered first, followed by the remaining ones.  The
executor used is the first that is valid for the decode concerned.  An executor is valid for a decode if
it has no qualifier or if the qualifier evaluates true for that decode.

RMIR v2.10 build 2 and later support a minor enhancement to the second draft of the Executor Descriptor
Notation.  As described above, additional names defined in a definitionSpec may be used in a qualifier
as well as in a parameterSpec.  Also, the three bracketted parts of an an executor descriptor, namely
the infoSpec, definitionSpec and parameterSpec may be given in any order.  This enables a definitionSpec
to precede an infoSpec containing a qualifier if that qualifier uses the additional defined names.  This
ordering is not required but it improves the readability of the entry.
-->
<irp:protocols xmlns="http://www.w3.org/1999/xhtml"
               xmlns:xi="http://www.w3.org/2001/XInclude"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xmlns:rm="https://sourceforge.net/projects/controlremote/files/RemoteMaster"
               version="rm2020-03-20"
               xsi:schemaLocation="http://www.harctoolbox.org/irp-protocols http://www.harctoolbox.org/schemas/irp-protocols.xsd"
               xmlns:irp="http://www.harctoolbox.org/irp-protocols">
    <irp:protocol name="DirecTV_P0">
        <irp:parameter name="uei-executor" type="xml">
            <rm:deployment executor="0162{Parm=0}[D,Parm;F]">
                <rm:protocolName>DirecTV</rm:protocolName>
            </rm:deployment>
        </irp:parameter>
    </irp:protocol>
    <irp:protocol name="DirecTV_P1">
        <irp:parameter name="uei-executor" type="xml">
            <rm:deployment executor="0162{Parm=1}[D,Parm;F]">
                <rm:protocolName>DirecTV</rm:protocolName>
            </rm:deployment>
        </irp:parameter>
    </irp:protocol>
    <irp:protocol name="DirecTV_P2">
        <irp:parameter name="uei-executor" type="xml">
            <rm:deployment executor="0162{Parm=2}[D,Parm;F]">
                <rm:protocolName>DirecTV</rm:protocolName>
            </rm:deployment>
        </irp:parameter>
    </irp:protocol>
    <irp:protocol name="DirecTV_P3">
        <irp:parameter name="uei-executor" type="xml">
            <rm:deployment executor="0162{Parm=3}[D,Parm;F]">
                <rm:protocolName>DirecTV</rm:protocolName>
            </rm:deployment>
        </irp:parameter>
    </irp:protocol>
    <irp:protocol name="DirecTV_P4">
        <irp:parameter name="uei-executor" type="xml">
            <rm:deployment executor="0162{Parm=4}[D,Parm;F]">
                <rm:protocolName>DirecTV</rm:protocolName>
            </rm:deployment>
        </irp:parameter>
    </irp:protocol>
    <irp:protocol name="DirecTV_P5">
        <irp:parameter name="uei-executor" type="xml">
            <rm:deployment executor="0162{Parm=5}[D,Parm;F]">
                <rm:protocolName>DirecTV</rm:protocolName>
            </rm:deployment>
        </irp:parameter>
    </irp:protocol>
    <irp:protocol name="Denon-K">
        <irp:parameter name="uei-executor"/>
        <irp:parameter name="uei-executor">00CD:2[D;S,F]</irp:parameter>
        <irp:parameter name="uei-executor">01C8[D?0,S?0,D?1,S?1,D?2,S?2,D?3,S?3,D?4,S?4,D?5,S?5;0,,,??,F]</irp:parameter>
        <irp:parameter name="uei-executor">01AC[D,S;0,,,F]</irp:parameter>
    </irp:protocol>
    <irp:protocol name="NEC">
        <irp:parameter name="uei-executor">011A:JP1[D?0,S?0,D?1,S?1,D?2,S?2,D?3,S?3;F,??,,0]</irp:parameter>
        <irp:parameter name="uei-executor">01BA[D,S;F:8,~F:8]</irp:parameter>
        <irp:parameter name="uei-executor">01EA(;S==~D:8)[F,~F:8;D]</irp:parameter>
    </irp:protocol>
    <irp:protocol name="NEC1">
        <irp:parameter name="uei-executor">011A:JP1[D?0,S?0,D?1,S?1,D?2,S?2,D?3,S?3;F,??,0,0]</irp:parameter>
        <irp:parameter name="uei-executor">01BA[D,S;F:8,~F:8]</irp:parameter>
        <irp:parameter name="uei-executor">01EA(;S==~D:8)[F,~F:8;D,0]</irp:parameter>
    </irp:protocol> 
    <irp:protocol name="NEC2">
        <irp:parameter name="uei-executor">01EA(;S==~D:8)[F,~F:8;D,1]</irp:parameter>
        <irp:parameter name="uei-executor">011A:JP1[D?0,S?0,D?1,S?1,D?2,S?2,D?3,S?3;F,??,1,0]</irp:parameter>
    </irp:protocol>     
    <irp:protocol name="NEC-f16">
        <irp:parameter name="uei-executor" type="xml">
            <rm:deployment executor="011A:JP1{X=F^E^129,Y=2*X:1+X:1:7,E=-1}(;X:6:1==63)[D?0,S?0,D?1,S?1,D?2,S?2,D?3,S?3;F,??,,Y]">
                <rm:protocolName>NEC-Yamaha</rm:protocolName>
                <rm:translator target="Y">YStyle=NEC|Y1|Y2|Y3</rm:translator>
                <rm:assignment target="X">-1</rm:assignment>
            </rm:deployment>
        </irp:parameter>
        <irp:parameter name="uei-executor" type="xml">
            <rm:deployment executor="01AD[;D,S,F,E]">
                <rm:assignment target="OBC2">E</rm:assignment>
                <rm:assignment target="E">-1</rm:assignment>
            </rm:deployment>
        </irp:parameter>
        <irp:parameter name="uei-executor">01BA[D,S;F,E]</irp:parameter>
        <irp:parameter name="uei-executor">01FF:JP1f16[D,S,F;E]</irp:parameter>
        <irp:parameter name="uei-executor">01EA(;S==~D:8)[F,E;D]</irp:parameter>
    </irp:protocol>
    <irp:protocol name="NEC1-f16">
        <irp:parameter name="uei-executor"/>
        <irp:parameter name="uei-executor" type="xml">
            <rm:deployment executor="011A:JP1{X=F^E^129,Y=2*X:1+X:1:7,E=-1}(;X:6:1==63)[D?0,S?0,D?1,S?1,D?2,S?2,D?3,S?3;F,??,0,Y]">
                <rm:protocolName>NEC1-Yamaha</rm:protocolName>
                <rm:translator target="Y">YStyle=NEC|Y1|Y2|Y3</rm:translator>
                <rm:assignment target="X">-1</rm:assignment>
            </rm:deployment>
        </irp:parameter>
        <irp:parameter name="uei-executor" type="xml">
            <rm:deployment executor="01AD[;D,S,F,E]">
                <rm:assignment target="OBC2">E</rm:assignment>
                <rm:assignment target="E">-1</rm:assignment>
            </rm:deployment>
        </irp:parameter>
        <irp:parameter name="uei-executor">01BA[D,S;F,E]</irp:parameter>
        <irp:parameter name="uei-executor">01FF:JP1f16[D,S,F;E]</irp:parameter>
        <irp:parameter name="uei-executor">01EA(;S==~D:8)[F,E;D,0]</irp:parameter>
    </irp:protocol>
    <irp:protocol name="NEC1-rnc">
        <irp:parameter name="uei-executor"><![CDATA[01AD[;D,S,F,~(((F:4)<<4)|F:4:4):8]]]></irp:parameter>
    </irp:protocol>
    <irp:protocol name="NEC2-f16">
        <irp:parameter name="uei-executor" type="xml">
            <rm:deployment executor="011A:JP1{X=F^E^129,Y=2*X:1+X:1:7,E=-1}(;X:6:1==63)[D?0,S?0,D?1,S?1,D?2,S?2,D?3,S?3;F,??,1,Y]">
                <rm:protocolName>NEC2-Yamaha</rm:protocolName>
                <rm:translator target="Y">YStyle=NEC|Y1|Y2|Y3</rm:translator>
                <rm:assignment target="X">-1</rm:assignment>
            </rm:deployment>
        </irp:parameter>
        <irp:parameter name="uei-executor" type="xml">
            <rm:deployment executor="01FF:JP1f16[D,S,F,1;E]">
                <rm:assignment target="OBC2">E</rm:assignment>
                <rm:assignment target="E">-1</rm:assignment>
            </rm:deployment>
        </irp:parameter>
        <irp:parameter name="uei-executor">01EA(;S==~D:8)[F,E;D,1]</irp:parameter>
    </irp:protocol>
    <irp:protocol name="NECx1">
        <irp:parameter name="prefer-over">NECx1-f16</irp:parameter>
        <irp:parameter name="uei-executor">011A:JP1[D?0,S?0,D?1,S?1,D?2,S?2,D?3,S?3;F,??,2,0]</irp:parameter>
    </irp:protocol>
    <irp:protocol name="NECx1-f16">
        <irp:parameter name="prefer-over">NECx-f16</irp:parameter>
        <irp:parameter name="reject-repeatless">true</irp:parameter>
        <irp:parameter name="uei-executor" type="xml">
            <rm:deployment executor="011A:JP1{X=F^E^129,Y=2*X:1+X:1:7,E=-1}(;X:6:1==63)[D?0,S?0,D?1,S?1,D?2,S?2,D?3,S?3;F,??,2,Y]">
                <rm:protocolName>NECx1-Yamaha</rm:protocolName>
                <rm:translator target="Y">YStyle=NEC|Y1|Y2|Y3</rm:translator>
                <rm:assignment target="X">-1</rm:assignment>
            </rm:deployment>
        </irp:parameter>
        <irp:irp><![CDATA[{38.4k,564}<1,-1|1,-3>(8,-8,D:8,S:8,F:8,E:8,1,^108m,(8,-8,D:1,1,^108m)*) [D:0..255,S:0..255=255-D,F:0..255,E:0..255=255-F]]]></irp:irp>
        <irp:documentation>
            A relaxed form (but used in some real devices) of the <a href="#NECx1">NECx1</a> protocol. Byte 3 and byte 4 are independent.
       </irp:documentation>
    </irp:protocol>
    <irp:protocol name="NECx2">
        <irp:parameter name="prefer-over">NECx2-f16</irp:parameter>
        <irp:parameter name="uei-executor">011A:JP1[D?0,S?0,D?1,S?1,D?2,S?2,D?3,S?3;F,??,3,0]</irp:parameter>
    </irp:protocol>
    <irp:protocol name="NECx2-f16">
        <irp:parameter name="prefer-over">NECx-f16</irp:parameter>
        <irp:parameter name="reject-repeatless">true</irp:parameter>
        <irp:parameter name="uei-executor" type="xml">
            <rm:deployment executor="011A:JP1{X=F^E^129,Y=2*X:1+X:1:7,E=-1}(;X:6:1==63)[D?0,S?0,D?1,S?1,D?2,S?2,D?3,S?3;F,??,3,Y]">
                <rm:protocolName>NECx2-Yamaha</rm:protocolName>
                <rm:translator target="Y">YStyle=NEC|Y1|Y2|Y3</rm:translator>
                <rm:assignment target="X">-1</rm:assignment>
            </rm:deployment>
        </irp:parameter>
        <irp:irp><![CDATA[{38.4k,564}<1,-1|1,-3>(8,-8,D:8,S:8,F:8,E:8,1,^108m)* [D:0..255,S:0..255=255-D,F:0..255,E:0..255=255-F]]]></irp:irp>
        <irp:documentation>
            A relaxed form (but used in some real devices) of the <a href="#NECx2">NECx2</a> protocol. Byte 3 and byte 4 are independent.
       </irp:documentation>
    </irp:protocol>
</irp:protocols>